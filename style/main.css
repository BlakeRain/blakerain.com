@import "tailwind.css";

@layer components {
  body {
    @apply bg-white text-neutral-800;
    @apply dark:bg-zinc-900 dark:text-neutral-200;
  }

  .markdown {
    @apply flex flex-col;
    @apply font-text text-xl;
    @apply text-neutral-800 dark:text-neutral-300;

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      @apply w-full font-sans;

      &.with-anchor {
        @apply relative;

        > a {
          @apply hidden absolute top-2 -left-8;
          @apply text-gray-500 dark:text-gray-400;
          @apply hover:text-gray-400 dark:hover:text-gray-300;

          > svg {
            @apply w-8 h-8;
          }
        }
      }
    }

    h1,
    h2,
    h3,
    h4 {
      + figure {
        @apply mt-3;
      }
    }

    h1 {
      @apply text-5xl font-bold mt-8 mb-4;
    }

    h2 {
      @apply text-4xl font-bold mt-8 mb-4;
    }

    h3 {
      @apply text-3xl font-bold mt-6 mb-3;
    }

    h4 {
      @apply text-2xl font-semibold mt-6 mb-2;
    }

    h6 {
      @apply text-xl font-semibold mt-4 mb-2;
    }

    p {
      @apply w-full mb-8 leading-relaxed;
    }

    a:not(.plain) {
      @apply underline text-blue-500 dark:text-blue-200;
      @apply hover:text-blue-600 dark:hover:text-blue-300;
    }

    .footnote {
      @apply mb-8 flex flex-row gap-1 text-base text-gray-500 dark:text-gray-400;

      &:has(+ .footnote) {
        @apply mb-0;
      }

      div.footnote-index {
        @apply leading-relaxed mr-2;

        &:after {
          content: ".";
        }
      }

      p {
        &:last-child {
          @apply mb-0;
        }
      }
    }

    dl,
    ul,
    ol {
      @apply w-full self-start mb-8;

      li {
        @apply break-words mt-2.5 pl-1.5;

        &:first-child {
          @apply mt-0;
        }
      }
    }

    ol {
      @apply list-decimal pl-10;
    }

    ul {
      @apply list-disc pl-10;
    }

    figure {
      @apply w-full mb-8 flex flex-col items-center;

      pre {
        @apply w-full bg-neutral-100 dark:bg-neutral-800 rounded-md p-4 overflow-x-scroll;

        code {
          @apply font-mono leading-snug;
        }
      }

      &.quote {
        @apply relative items-start;

        &:before {
          position: absolute;
          top: 24px;
          left: -44px;
          content: "“";
          font-size: 6rem;

          @apply text-neutral-400 dark:text-neutral-700;
          @apply hidden md:block;
        }

        p {
          @apply italic mb-0;
          @apply text-neutral-600 dark:text-neutral-400;
        }

        cite {
          &:before {
            content: "— ";
          }

          @apply font-sans ml-4;
        }
      }
    }

    figcaption {
      @apply mt-4 font-sans text-sm text-center;
      @apply text-neutral-600 dark:text-neutral-400;
    }

    blockquote {
      @apply w-full mb-8 border-l-4 border-l-blue-400 px-8;

      p {
        @apply italic text-neutral-600 dark:text-neutral-400;

        &:last-child {
          @apply mb-0;
        }
      }
    }

    table {
      @apply min-w-full mb-8 border-collapse table-auto;

      thead {
        @apply bg-transparent dark:bg-neutral-800;
        @apply dark:text-white;
        @apply border-b border-neutral-500;

        tr {
          th {
            @apply px-6 py-4;

            &.left {
              @apply text-left;
            }

            &.right {
              @apply text-right;
            }

            &.center {
              @apply text-center;
            }
          }
        }
      }

      tbody {
        tr {
          @apply border-b border-neutral-400 dark:border-neutral-600;

          td {
            @apply whitespace-nowrap px-6 py-4;

            &.left {
              @apply text-left;
            }

            &.right {
              @apply text-right;
            }

            &.center {
              @apply text-center;
            }
          }
        }
      }
    }

    .callout {
      @apply flex flex-col gap-2 rounded-md p-4 text-base mb-8;

      > .heading {
        @apply flex flex-row gap-1 font-sans;

        > svg {
          @apply w-[1.2rem];
        }

        > div {
          @apply font-bold;
        }
      }

      > .body {
        p:last-child {
          @apply mb-0;
        }
      }

      &.note {
        @apply bg-blue-200 dark:bg-blue-950;

        > .heading {
          @apply text-blue-600 dark:text-blue-500;
        }

        > .body {
          @apply text-black dark:text-white;
        }
      }

      &.tip {
        @apply bg-teal-100 dark:bg-teal-900;

        > .heading {
          @apply text-teal-600 dark:text-teal-300;
        }
      }

      &.success {
        @apply bg-green-100 dark:bg-green-900;

        > .heading {
          @apply text-green-600 dark:text-green-400;
        }
      }

      &.question {
        @apply bg-amber-200/10;

        > .heading {
          @apply text-amber-500 dark:text-amber-200;
        }
      }

      &.warning {
        @apply bg-orange-500/10;

        > .heading {
          @apply text-orange-600;
        }
      }

      &.danger {
        @apply bg-red-500/25;

        > .heading {
          @apply text-red-500;
        }
      }

      &.example {
        @apply bg-violet-900/25;

        > .heading {
          @apply text-violet-600 dark:text-violet-400;
        }
      }
    }
  }
}
